<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <title>UPCHAIN – 투자자 보호 뉴스 </title>
    <link rel="stylesheet" href="css/style.css" />
  </head>
  <body>
    <!-- 공통 헤더 -->
    <header class="navbar">
      <div class="nav-inner">
        <div class="nav-logo">UPCHAIN</div>
        <nav class="nav-links">
          <a href="index.html">ABOUT</a>
          <a href="#project">PROJECT</a>
          <a href="games.html">GAMES</a>
          <a href="Mock-Trading.html">MOCK TRADING</a>
          <a href="news.html" class="active">NEWS</a>
        </nav>
      </div>
    </header>

    <main class="main">
     
      <section class="section">
        <h1 class="page-title">투자자 보호 뉴스</h1>
        <p class="page-subtitle">
          가상자산 관련 <strong>사기·해킹·규제 동향</strong>을 간단히 정리한 카드 뉴스 형식으로 보여줍니다.
          실제 서비스에서는 투자자 보호 뉴스 API를 연동할 수 있습니다.
        </p>
        <div id="news-list" class="section-grid"></div>
        <p id="news-empty" style="display:none; margin-top:20px; color:#6b7280;">
      아직 불러올 수 있는 뉴스가 없습니다
        </p>
      </section>
    </main>
    <script>
  async function loadInvestorNews() {
    const listEl = document.getElementById("news-list");
    const emptyEl = document.getElementById("news-empty");

    listEl.innerHTML = "<p>뉴스를 불러오는 중입니다...</p>";
    emptyEl.style.display = "none";

    try {
      const res = await fetch("/api/investor-news");
      const data = await res.json();

      listEl.innerHTML = "";

      const articles = data.articles || [];
      if (articles.length === 0) {
        emptyEl.style.display = "block";
        return;
      }

      articles.forEach((a) => {
        const card = document.createElement("article");
        card.className = "card news-card";

        const date = a.publishedAt ? new Date(a.publishedAt) : null;
        const dateStr = date
          ? date.toLocaleString("ko-KR", {
              month: "2-digit",
              day: "2-digit",
              hour: "2-digit",
              minute: "2-digit",
            })
          : "";

        card.innerHTML = `
          <h3 class="news-title">${a.title || "제목 없음"}</h3>
          <p class="news-meta">
            <span class="news-source">${(a.source && a.source.name) || "출처 미상"}</span>
            <span class="news-date">${dateStr}</span>
          </p>
          <p class="news-desc">
            ${a.description || "요약 내용이 없습니다."}
          </p>
          <a href="${a.url}" target="_blank" class="news-link">
            원문 기사 보기
          </a>
        `;

        listEl.appendChild(card);
      });
    } catch (err) {
      console.error("뉴스 로딩 실패:", err);
      listEl.innerHTML =
        "<p style='color:red'>뉴스를 불러오는 중 오류가 발생했습니다.</p>";
    }
  }

  document.addEventListener("DOMContentLoaded", loadInvestorNews);
</script>


  </body>
</html>
